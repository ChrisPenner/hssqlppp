HsSqlPpp
========

A parser, quasiquoter, pretty printer, and type checker for SQL
written in Haskell. Supports PostgreSQL SQL and PL/pgSQL syntax. BSD
licensed.

This documentation is for the HEAD of the master branch in github:

[https://github.com/JakeWheat/hssqlppp](https://github.com/JakeWheat/hssqlppp)

This documentation is a work in progress.

Use
===

Possible future uses of this library include:

* parsing sql as part of another library
* lint checking sql code
* type-checker can help with sql development: e.g. change the name of
  a view, type-check, and you can see which functions you need to
  update with the new name
* generating sql code programmatically/ generating sql from some other
  source
* transforming sql code using quasiquoting
* viewing the catalog produced by some sql code
* helping with typesafe database access from haskell
* generating documentation for sql

Status
======

Pre-alpha. Support for parsing SQL is patchy, but not too bad. Here is
an extract from the parsing tests which gives a bunch of examples of what
kind of SQL can currently be parsed:

* [Parsing examples](ParserTests.html)

The type checker is currently still being fixed after some reworking
of parsing and ast types. It should handle a lot of queries and dml
fine though.

Extract from the type checking tests:

* [Type-checking examples](TypeCheckTests.html)

Installation
============

This project is currently developed on GHC 7.0.4.

To install use

~~~~~{.sh}
cabal install hssqlppp
~~~~~

Documentation
=============

Here is a program to parse some sql and print the ast:

~~~~~{.haskell}

main :: IO ()
main = undefined

~~~~~

Here is a program which parses and typechecks a query and outputs the
result type:

~~~~~{.haskell}

main :: IO ()
main = undefined

~~~~~

Here is a program which generates sql:

~~~~~{.haskell}

main :: IO ()
main = undefined

~~~~~

[Haddock docs](haddock/index.html)

Useful links
============

Homepage: [http://jakewheat.github.com/hssqlppp/](http://jakewheat.github.com/hssqlppp/)

Hackage: [http://hackage.haskell.org/package/hssqlppp](http://hackage.haskell.org/package/hssqlppp)

Repository: [https://github.com/JakeWheat/hssqlppp](https://github.com/JakeWheat/hssqlppp)

Reporting issues and feature requests
=====================================

Use the github issue tracker. Please supply an example of sql which
doesn't parse/typecheck correctly where relevant.

[https://github.com/JakeWheat/hssqlppp/issues](https://github.com/JakeWheat/hssqlppp/issues)


Provisional Future Plans
========================

* parse most postgresql syntax, possibly other sql dialects as well
* improve the typechecker
* improve the catalog
* quasi-quoting
* some simple syntax extension support
* parameterized statements/typesafe haskell access
* documentation generator for sql codebases

Contact
=======

Let me know if you're using/ interested in using the library, if you
have any problems, bug reports, or suggestions, etc.. All
contributions, comments and criticism welcome:

jakewheatmail@gmail.com
