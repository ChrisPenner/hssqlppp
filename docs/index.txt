HsSqlPpp
========

A parser, quasiquoter, pretty printer, and type checker for SQL
written in Haskell. Supports PostgreSQL SQL and PL/pgSQL syntax. BSD
licensed.

Status
======

Pre-alpha. Support for parsing SQL is patchy, but not too bad. Support
for type-checking is also patchy. See these extracts from the test
files for examples of the kind of SQL which parses and type checks:

* [Parsing examples](ParserTests.html)
* [Type-checking examples](TypeCheckTests.html)

Is currently able to successfully parse and partially type check three
moderately sized SQL files from another project.

Some other limitations are that the design of the AST node types is
pretty basic, not much work has been done on correctly rejecting
invalid SQL (although it does pretty well despite this), and not much
thought has been put into error messages and error reporting yet.

Installation
============

A bit of adventure for non Haskell programmers: if you don't already
have Haskell installed, you can get it here:
[http://hackage.haskell.org/platform/](http://hackage.haskell.org/platform/)

You will also need PostgreSQL installed. HBDC-postgresql (which is
installed by cabal below) depends on the development libraries/headers
for PostgreSQL.

Then use

    cabal update
    cabal install hssqlppp

to install.

It's currently developed on GHC 6.12, but the latest release still
works on 6.10.

Documentation
=============

The documentation you are reading is a work in progress.

[Haddock](haddock/index.html)

[Example code](examples.html)

The [htmlized source code](pandoc_source/index.html) has lots of comments.

To build a local copy of the documentation:

    cabal install hssqlppp -fexecutable
    HsSqlSystem makewebsite

and the docs will be in ./website/ .

or to avoid installing the HsSqlSystem exe, you can use:

    cabal unpack hssqlppp
    cd hssqlppp-x.x.x
    ghc --make -threaded -XDeriveDataTypeable -iexamples:src examples/HsSqlSystem.lhs
    examples/HsSqlSystem makewebsite

Development info
================

Get latest development version:

    bzr branch lp:~jakewheat/hssqlppp/trunk

(This version is often a mess and sometimes broken).

Uses Parsec for parsing, HDBC for database access, and UUAGC to assist
the type checking (UUAGC is not needed to build from source unless you
edit the .ag files).

Comes with a small test suite, which you can run like so:

    cabal unpack hssqlppp
    cd hssqlppp-x.x.x
    ghc --make -threaded -XDeriveDataTypeable -iexamples:src examples/HsSqlSystem.lhs
    examples/HsSqlSystem test

Useful links
============

Hackage: [http://hackage.haskell.org/package/hssqlppp](http://hackage.haskell.org/package/hssqlppp)

Repository: [http://launchpad.net/hssqlppp](http://launchpad.net/hssqlppp)

Contact
=======

Let me know if you're using/ interested in using the library, if you
have any problems, bug reports, or suggestions, etc.. All
contributions, comments and criticism welcome:

jakewheatmail@gmail.com
